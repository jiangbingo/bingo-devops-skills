# Task Completion Tracker

追踪 Git 提交历史中的任务完成情况，分析项目速度、任务类型分布，帮助团队了解开发效率和项目健康状况。

## 功能特性

- 📊 **任务分类**: 基于约定式提交自动分类任务（feat/fix/refactor 等）
- 🚀 **速度分析**: 计算每周/每月任务完成数，识别速度趋势
- 📈 **趋势追踪**: 展示任务类型分布的变化趋势
- 📅 **时段分析**: 识别最活跃的工作日和时间段
- 💡 **智能洞察**: 提供 Bug/Feature 比例、重构占比等关键指标

## 使用场景

### 分析任务完成情况
```
"分析任务完成情况"
"我们的项目速度怎么样？"
"Task completion analysis"
```

### 了解任务类型
```
"我们主要在做什么类型的任务？"
"新功能和 bug 修复的比例是多少？"
"What type of tasks are we working on?"
```

### 检查项目趋势
```
"项目进度趋势如何？"
"最近开发效率有变化吗？"
"Analyze project velocity"
```

## 使用方法

### 1. 直接运行

```bash
python3 skillsets/task-completion-tracker/impl.py
```

### 2. 运行测试

```bash
python3 skillsets/task-completion-tracker/test_skill.py
```

### 3. 查看结果

生成的报告将保存为 `task_completion_report.txt`

## 输出报告说明

### 📊 任务类型分布

显示各种任务类型的数量和占比：

| 类型 | 说明 |
|------|------|
| feat | 新功能 |
| fix | Bug 修复 |
| refactor | 代码重构 |
| docs | 文档 |
| test | 测试 |
| chore | 杂项维护 |
| style | 代码风格 |
| perf | 性能优化 |
| ci | CI/CD |

### 🚀 项目速度分析

- **每周平均完成**: 平均每周完成的任务数
- **周度完成情况**: 最近 8 周的详细数据
- **速度趋势**: 上升/下降/稳定
- **月度统计**: 按月汇总的任务完成数

### 📅 活跃时段分析

按星期几统计任务完成数，使用可视化条形图展示。

### 📈 任务类型趋势

按月展示各类任务的数量变化，帮助识别：
- 新功能开发趋势
- Bug 修复压力
- 重构投入变化
- 测试覆盖情况

### 💡 洞察与建议

基于数据自动生成的洞察：
- Bug/Feature 比例评估
- 重构占比分析
- 测试覆盖率检查
- 文档维护情况
- 项目速度评估

## 关键指标说明

### Bug/Feature 比例

```
Bug/Feature 比例 = fix 提交数 / feat 提交数
```

| 比例 | 说明 | 建议 |
|------|------|------|
| < 0.2 | ✅ 健康 | 继续保持 |
| 0.2 - 0.5 | ⚠️ 需关注 | 加强代码审查和测试 |
| > 0.5 | 🔴 较高 | 需要改善代码质量 |

### 重构占比

```
重构占比 = refactor 提交数 / 总提交数
```

- **> 15%**: 团队积极维护代码质量
- **5-15%**: 正常范围
- **< 5%**: 建议增加重构投入，避免技术债务

### 项目速度

```
每周平均完成 = 近 4 周总任务数 / 4
```

| 速度 | 说明 |
|------|------|
| < 5 | 需要关注团队容量或阻塞问题 |
| 5-15 | 健康的开发速度 |
| > 20 | 高效团队，注意避免疲劳 |

## 约定式提交格式

此工具依赖约定式提交格式进行任务分类：

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

### 常用类型

```bash
feat: add user login feature
fix: resolve authentication timeout
refactor: simplify payment module
docs: update API documentation
test: add unit tests for cart
chore: upgrade dependencies
style: format code with prettier
perf: optimize database queries
ci: add GitHub Actions workflow
```

## 技术细节

### 依赖工具
- **Git**: 用于获取提交历史
- **Python 3.6+**: 运行分析脚本

### 分析时间范围

默认分析最近 90 天的提交记录。可在 `impl.py` 的 `main()` 函数中调整 `days` 参数。

### 提交过滤

- 自动排除合并提交（merge commits）
- 仅分析符合约定式提交格式的提交
- 无法识别的提交归为 "other" 类型

## 使用建议

### 团队协作

1. **采用约定式提交**: 确保团队成员使用规范的提交格式
2. **定期分析**: 每月运行一次，监控项目健康度
3. **关注趋势**: 关注 Bug/Feature 比例变化，及时调整策略
4. **平衡任务**: 平衡新功能开发和技术债务偿还

### 项目管理

1. **速度规划**: 基于历史速度进行迭代规划
2. **资源分配**: 根据任务类型分布调整团队资源
3. **质量监控**: 高 Bug/Feature 比例时加强质量措施
4. **重构计划**: 定期安排重构任务，避免技术债务积累

### 改进建议

1. **提高质量**: 如果 Bug/Feature 比例过高
   - 加强代码审查
   - 增加测试覆盖
   - 改善开发流程

2. **增加测试**: 如果测试占比过低
   - 实施 TDD
   - 在 PR 中要求测试
   - 专项测试任务

3. **维护文档**: 如果文档更新少
   - 代码变更时同步更新文档
   - 分配专门的文档任务
   - 使用文档生成工具

## 示例输出

```
================================================================================
任务完成追踪分析报告 (Task Completion Analysis)
分析时间: 2025-01-30 10:30:00
分析周期: 2024-10-31 至今 (90 天)
================================================================================

总任务数: 156

================================================================================
📊 任务类型分布
================================================================================
  新功能              45 ( 28.8%) ████████████████
  Bug 修复            28 ( 17.9%) █████████
  重构                18 ( 11.5%) ██████
  文档                12 (  7.7%) ████
  测试                15 (  9.6%) █████
  杂项                38 ( 24.4%) ███████████████

关键指标:
  🎯 新功能 (feat):       45 (28.8%)
  🐛 Bug 修复 (fix):       28 (17.9%)
  🔧 重构 (refactor):     18 (11.5%)
  📈 Bug/Feature 比例:    0.62 (每个功能对应的 bug 数)

================================================================================
🚀 项目速度分析
================================================================================
每周平均完成: 12.3 个任务

最近 8 周任务完成情况:
  2024-W48:   15 个任务
  2024-W49:   12 个任务
  2024-W50:   11 个任务
  ...
```

## 常见问题

**Q: 为什么有些提交没有被分类？**
A: 这些提交可能不符合约定式提交格式，工具将其归类为 "other"。

**Q: 如何调整分析时间范围？**
A: 修改 `impl.py` 中 `main()` 函数的 `days` 参数。

**Q: Bug/Feature 比例高一定不好吗？**
A: 不一定。某些阶段（如重构后）可能有更多 bug。关键是观察趋势和持续改进。

**Q: 如何提高任务分类准确率？**
A: 确保团队使用统一的约定式提交格式，并在代码审查中检查。

**Q: 工具能识别 Issue 或 PR 吗？**
A: 目前基于提交消息分析。可以通过在提交中包含 Issue 编号（如 `#123`）来关联。

## 相关资源

- [约定式提交规范](https://www.conventionalcommits.org/)
- [如何编写好的提交消息](https://chris.beams.io/posts/git-commit/)

## License

MIT
